{"version":3,"file":"main-DVgQkZrA.js","sources":["../../src/js/global-notification.js","../../src/js/form-validation.js","../../src/js/rating-modal.js","../../src/js/favorites.js","../../src/js/header.js","../../src/js/exercise-modal.js","../../src/js/exercises.js","../../src/js/quote.js","../../src/main.js"],"sourcesContent":["// Global notification system\nlet notificationTimeout = null;\n\n/**\n * Shows a global notification message\n * @param {string} message - The message to display\n * @param {string} type - The type of notification ('success' or 'error')\n */\nexport function showGlobalNotification(message, type = 'success') {\n  const notification = document.getElementById('js-global-notification');\n  const textElement = document.getElementById('js-global-notification-text');\n\n  if (!notification || !textElement) return;\n\n  // Clear any existing timeout\n  if (notificationTimeout) {\n    clearTimeout(notificationTimeout);\n    notificationTimeout = null;\n  }\n\n  // Set the message and type\n  textElement.textContent = message;\n  notification.classList.remove('global-notification--error');\n  if (type === 'error') {\n    notification.classList.add('global-notification--error');\n  }\n\n  // Show the notification\n  notification.classList.add('global-notification--visible');\n\n  // Auto-hide after 3 seconds\n  notificationTimeout = setTimeout(() => {\n    hideGlobalNotification();\n  }, 3000);\n}\n\n/**\n * Hides the global notification\n */\nexport function hideGlobalNotification() {\n  const notification = document.getElementById('js-global-notification');\n  const textElement = document.getElementById('js-global-notification-text');\n\n  if (!notification) return;\n\n  // Clear timeout if exists\n  if (notificationTimeout) {\n    clearTimeout(notificationTimeout);\n    notificationTimeout = null;\n  }\n\n  // Hide the notification\n  notification.classList.remove('global-notification--visible');\n\n  // Clear content after animation\n  setTimeout(() => {\n    if (textElement) {\n      textElement.textContent = '';\n    }\n    notification.classList.remove('global-notification--error');\n  }, 300);\n}\n\n/**\n * Initializes the global notification system\n */\nexport function initGlobalNotification() {\n  const closeBtn = document.getElementById('js-global-notification-close');\n\n  if (closeBtn) {\n    closeBtn.addEventListener('click', hideGlobalNotification);\n  }\n}\n","/**\n * Form validation utilities module\n * Provides reusable functions for form field validation and error display\n */\n\n/**\n * Shows an error message for a form field\n * @param {HTMLElement} inputElement - The input/textarea element\n * @param {HTMLElement} errorElement - The element to display error message\n * @param {string} message - The error message to display\n */\nexport function showFieldError(inputElement, errorElement, message) {\n  if (inputElement) {\n    // Determine the appropriate error class based on element type\n    const errorClass = inputElement.classList.contains('rating-modal__textarea')\n      ? 'rating-modal__textarea--error'\n      : inputElement.classList.contains('rating-modal__input')\n      ? 'rating-modal__input--error'\n      : inputElement.classList.contains('footer__subscribe-form-input')\n      ? 'footer__subscribe-form-input--error'\n      : 'form-field--error';\n\n    inputElement.classList.add(errorClass);\n  }\n\n  if (errorElement) {\n    errorElement.textContent = message;\n    errorElement.classList.add('form-error--visible');\n  }\n}\n\n/**\n * Hides the error message for a form field\n * @param {HTMLElement} inputElement - The input/textarea element\n * @param {HTMLElement} errorElement - The element displaying error message\n */\nexport function hideFieldError(inputElement, errorElement) {\n  if (inputElement) {\n    inputElement.classList.remove(\n      'rating-modal__input--error',\n      'rating-modal__textarea--error',\n      'footer__subscribe-form-input--error',\n      'form-field--error'\n    );\n  }\n\n  if (errorElement) {\n    errorElement.textContent = '';\n    errorElement.classList.remove('form-error--visible');\n  }\n}\n\n/**\n * Validates an email address\n * @param {string} email - The email address to validate\n * @returns {boolean} True if email is valid, false otherwise\n */\nexport function validateEmail(email) {\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n  return emailRegex.test(email);\n}\n\n/**\n * Validates that a field is not empty\n * @param {string} value - The value to validate\n * @returns {boolean} True if value is not empty, false otherwise\n */\nexport function validateRequired(value) {\n  return value.trim().length > 0;\n}\n\n","import { showGlobalNotification } from './global-notification.js';\r\nimport {\r\n  showFieldError,\r\n  hideFieldError,\r\n  validateEmail,\r\n} from './form-validation.js';\r\n\r\n// Змінна для зберігання ID вправи для рейтингу\r\nlet currentExerciseIdForRating = null;\r\nlet ratingModalKeydownHandler = null;\r\n\r\nfunction attachRatingModalListeners() {\r\n  if (ratingModalKeydownHandler) return;\r\n  ratingModalKeydownHandler = event => {\r\n    if (event.key === 'Escape') {\r\n      closeRatingModal();\r\n    }\r\n  };\r\n  document.addEventListener('keydown', ratingModalKeydownHandler);\r\n}\r\n\r\nfunction detachRatingModalListeners() {\r\n  if (!ratingModalKeydownHandler) return;\r\n  document.removeEventListener('keydown', ratingModalKeydownHandler);\r\n  ratingModalKeydownHandler = null;\r\n}\r\n\r\n// Helper functions for server messages\r\nfunction showServerMessage(message, type = 'error') {\r\n  const messageElement = document.getElementById('js-rating-server-message');\r\n  const messageTextElement = document.getElementById(\r\n    'js-rating-server-message-text'\r\n  );\r\n  if (!messageElement || !messageTextElement) return;\r\n\r\n  messageTextElement.textContent = message;\r\n  messageElement.classList.remove(\r\n    'rating-modal__server-message--error',\r\n    'rating-modal__server-message--success'\r\n  );\r\n  messageElement.classList.add(`rating-modal__server-message--${type}`);\r\n  messageElement.classList.add('rating-modal__server-message--visible');\r\n}\r\n\r\nfunction hideServerMessage() {\r\n  const messageElement = document.getElementById('js-rating-server-message');\r\n  const messageTextElement = document.getElementById(\r\n    'js-rating-server-message-text'\r\n  );\r\n  if (!messageElement) return;\r\n\r\n  messageElement.classList.remove('rating-modal__server-message--visible');\r\n  if (messageTextElement) {\r\n    messageTextElement.textContent = '';\r\n  }\r\n  messageElement.classList.remove(\r\n    'rating-modal__server-message--error',\r\n    'rating-modal__server-message--success'\r\n  );\r\n}\r\n\r\n// Функція для закриття модального вікна рейтингу\r\nfunction closeRatingModal() {\r\n  const modal = document.getElementById('js-rating-modal');\r\n  if (!modal) return;\r\n\r\n  modal.classList.remove('rating-modal--open');\r\n  document.body.style.overflow = '';\r\n  currentExerciseIdForRating = null;\r\n  detachRatingModalListeners();\r\n\r\n  // Clear all errors when closing\r\n  const emailInput = document.getElementById('js-rating-modal-email');\r\n  const emailError = document.getElementById('js-email-error');\r\n  const commentTextarea = document.getElementById('js-rating-modal-comment');\r\n  const commentError = document.getElementById('js-comment-error');\r\n  const ratingError = document.getElementById('js-rating-error');\r\n\r\n  hideFieldError(emailInput, emailError);\r\n  hideFieldError(commentTextarea, commentError);\r\n  hideFieldError(null, ratingError);\r\n  hideServerMessage();\r\n}\r\n\r\n// Функція для відкриття модального вікна рейтингу\r\nexport function openRatingModal(exerciseId) {\r\n  const modal = document.getElementById('js-rating-modal');\r\n  if (!modal) return;\r\n\r\n  currentExerciseIdForRating = exerciseId;\r\n\r\n  // Скидаємо форму\r\n  const form = document.getElementById('js-rating-modal-form');\r\n  const emailInput = document.getElementById('js-rating-modal-email');\r\n  const commentTextarea = document.getElementById('js-rating-modal-comment');\r\n  const ratingValue = document.getElementById('js-rating-modal-value');\r\n  const stars = document.querySelectorAll('.rating-modal__star');\r\n\r\n  if (form) form.reset();\r\n  if (ratingValue) ratingValue.textContent = '0.0';\r\n\r\n  // Clear all errors\r\n  const emailError = document.getElementById('js-email-error');\r\n  const commentError = document.getElementById('js-comment-error');\r\n  const ratingError = document.getElementById('js-rating-error');\r\n  hideFieldError(emailInput, emailError);\r\n  hideFieldError(commentTextarea, commentError);\r\n  hideFieldError(null, ratingError);\r\n  hideServerMessage();\r\n\r\n  // Скидаємо активні зірки\r\n  stars.forEach(star => {\r\n    star.classList.remove('rating-modal__star--active');\r\n    const svg = star.querySelector('svg');\r\n    if (svg) {\r\n      const path = svg.querySelector('path');\r\n      if (path) {\r\n        path.setAttribute('fill', 'none');\r\n        path.setAttribute('stroke', 'currentColor');\r\n      }\r\n    }\r\n  });\r\n\r\n  // Відкриваємо модальне вікно\r\n  modal.classList.add('rating-modal--open');\r\n  document.body.style.overflow = 'hidden';\r\n  attachRatingModalListeners();\r\n}\r\n\r\n// Експорт функції закриття для використання в інших модулях\r\nexport { closeRatingModal };\r\n\r\n// Ініціалізація event listeners для модального вікна рейтингу\r\nexport function initRatingModal() {\r\n  // Обробники для модального вікна рейтингу\r\n  const ratingModalCloseBtn = document.getElementById('js-rating-modal-close');\r\n  const ratingModal = document.getElementById('js-rating-modal');\r\n  const ratingModalOverlay = ratingModal?.querySelector(\r\n    '.rating-modal__overlay'\r\n  );\r\n\r\n  if (ratingModalCloseBtn) {\r\n    ratingModalCloseBtn.addEventListener('click', closeRatingModal);\r\n  }\r\n\r\n  if (ratingModalOverlay) {\r\n    ratingModalOverlay.addEventListener('click', closeRatingModal);\r\n  }\r\n\r\n  // Обробник для закриття серверного повідомлення\r\n  const serverMessageCloseBtn = document.getElementById(\r\n    'js-rating-server-message-close'\r\n  );\r\n  if (serverMessageCloseBtn) {\r\n    serverMessageCloseBtn.addEventListener('click', hideServerMessage);\r\n  }\r\n\r\n  // Обробка зірок рейтингу\r\n  const ratingStars = document.querySelectorAll('.rating-modal__star');\r\n  const ratingValue = document.getElementById('js-rating-modal-value');\r\n  let selectedRating = 0;\r\n\r\n  ratingStars.forEach((star, index) => {\r\n    star.addEventListener('click', () => {\r\n      selectedRating = index + 1;\r\n\r\n      if (ratingValue) {\r\n        ratingValue.textContent = selectedRating.toFixed(1);\r\n      }\r\n\r\n      // Оновлюємо зірки\r\n      ratingStars.forEach((s, i) => {\r\n        if (i < selectedRating) {\r\n          s.classList.add('rating-modal__star--active');\r\n          const svg = s.querySelector('svg');\r\n          if (svg) {\r\n            const path = svg.querySelector('path');\r\n            if (path) {\r\n              path.setAttribute('fill', '#EEA10C');\r\n              path.setAttribute('stroke', '#EEA10C');\r\n            }\r\n          }\r\n        } else {\r\n          s.classList.remove('rating-modal__star--active');\r\n          const svg = s.querySelector('svg');\r\n          if (svg) {\r\n            const path = svg.querySelector('path');\r\n            if (path) {\r\n              path.setAttribute('fill', 'none');\r\n              path.setAttribute('stroke', 'currentColor');\r\n            }\r\n          }\r\n        }\r\n      });\r\n    });\r\n\r\n    // Hover ефект\r\n    star.addEventListener('mouseenter', () => {\r\n      const hoverRating = index + 1;\r\n      ratingStars.forEach((s, i) => {\r\n        if (\r\n          i < hoverRating &&\r\n          !s.classList.contains('rating-modal__star--active')\r\n        ) {\r\n          s.style.color = 'rgba(255, 255, 255, 0.6)';\r\n        }\r\n      });\r\n    });\r\n\r\n    star.addEventListener('mouseleave', () => {\r\n      ratingStars.forEach((s, i) => {\r\n        if (!s.classList.contains('rating-modal__star--active')) {\r\n          s.style.color = 'rgba(255, 255, 255, 0.3)';\r\n        }\r\n      });\r\n    });\r\n  });\r\n\r\n  // Add input event listeners to clear errors on input\r\n  const emailInput = document.getElementById('js-rating-modal-email');\r\n  const emailError = document.getElementById('js-email-error');\r\n  const commentTextarea = document.getElementById('js-rating-modal-comment');\r\n  const commentError = document.getElementById('js-comment-error');\r\n\r\n  if (emailInput && emailError) {\r\n    emailInput.addEventListener('input', () => {\r\n      hideFieldError(emailInput, emailError);\r\n    });\r\n  }\r\n\r\n  if (commentTextarea && commentError) {\r\n    commentTextarea.addEventListener('input', () => {\r\n      hideFieldError(commentTextarea, commentError);\r\n    });\r\n  }\r\n\r\n  // Clear rating error when selecting a star\r\n  ratingStars.forEach(star => {\r\n    star.addEventListener('click', () => {\r\n      const ratingError = document.getElementById('js-rating-error');\r\n      if (ratingError) {\r\n        hideFieldError(null, ratingError);\r\n      }\r\n    });\r\n  });\r\n\r\n  // Обробка форми рейтингу\r\n  const ratingForm = document.getElementById('js-rating-modal-form');\r\n  if (ratingForm) {\r\n    ratingForm.addEventListener('submit', e => {\r\n      e.preventDefault();\r\n\r\n      const ratingStars = document.querySelectorAll('.rating-modal__star');\r\n      const ratingValue = document.getElementById('js-rating-modal-value');\r\n      const emailInput = document.getElementById('js-rating-modal-email');\r\n      const commentTextarea = document.getElementById(\r\n        'js-rating-modal-comment'\r\n      );\r\n      const emailError = document.getElementById('js-email-error');\r\n      const commentError = document.getElementById('js-comment-error');\r\n      const ratingError = document.getElementById('js-rating-error');\r\n\r\n      let selectedRating = 0;\r\n      let hasErrors = false;\r\n\r\n      // Знаходимо вибраний рейтинг\r\n      ratingStars.forEach((star, index) => {\r\n        if (star.classList.contains('rating-modal__star--active')) {\r\n          selectedRating = Math.max(selectedRating, index + 1);\r\n        }\r\n      });\r\n\r\n      // Validate rating\r\n      if (selectedRating === 0) {\r\n        showFieldError(null, ratingError, 'Please select a rating');\r\n        hasErrors = true;\r\n      } else {\r\n        hideFieldError(null, ratingError);\r\n      }\r\n\r\n      const email = emailInput?.value.trim() || '';\r\n      const review = commentTextarea?.value.trim() || '';\r\n\r\n      // Validate email\r\n      if (!email) {\r\n        showFieldError(emailInput, emailError, 'Please enter your email');\r\n        hasErrors = true;\r\n      } else if (!validateEmail(email)) {\r\n        showFieldError(\r\n          emailInput,\r\n          emailError,\r\n          'Please enter a valid email address'\r\n        );\r\n        hasErrors = true;\r\n      } else {\r\n        hideFieldError(emailInput, emailError);\r\n      }\r\n\r\n      // Validate comment\r\n      if (!review) {\r\n        showFieldError(\r\n          commentTextarea,\r\n          commentError,\r\n          'Please enter your comment'\r\n        );\r\n        hasErrors = true;\r\n      } else {\r\n        hideFieldError(commentTextarea, commentError);\r\n      }\r\n\r\n      // Stop if there are errors\r\n      if (hasErrors) {\r\n        return;\r\n      }\r\n\r\n      // Відправка рейтингу на сервер\r\n      if (currentExerciseIdForRating) {\r\n        // Clear previous server messages\r\n        hideServerMessage();\r\n\r\n        fetch(\r\n          `https://your-energy.b.goit.study/api/exercises/${currentExerciseIdForRating}/rating`,\r\n          {\r\n            method: 'PATCH',\r\n            headers: {\r\n              'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify({\r\n              rate: selectedRating,\r\n              email,\r\n              review,\r\n            }),\r\n          }\r\n        )\r\n          .then(async response => {\r\n            const data = await response.json().catch(() => ({}));\r\n\r\n            if (!response.ok) {\r\n              let message =\r\n                data.message || 'Failed to submit rating. Please try again.';\r\n\r\n              if (response.status === 409) {\n                message = 'You already submitted a review for this exercise.';\n              }\n\n              if (response.status === 400 || response.status === 422) {\n                message = 'Please check the form data and try again.';\n              }\n\r\n              throw { message, data };\r\n            }\r\n\r\n            return data;\r\n          })\r\n          .then(data => {\r\n            closeRatingModal();\r\n            const exerciseName = data.name || 'the exercise';\r\n            showGlobalNotification(\r\n              `Thank you, your review for exercise ${exerciseName} has been submitted`,\r\n              'success'\r\n            );\r\n          })\r\n          .catch(error => {\r\n            const errorMessage =\r\n              error.message || 'Failed to submit rating. Please try again.';\r\n            showServerMessage(errorMessage, 'error');\r\n          });\r\n      }\r\n    });\r\n  }\r\n}\r\n","// LocalStorage key for favorites\nconst FAVORITES_KEY = 'favorites';\n\n// Get all favorite exercise IDs from LocalStorage\nexport function getFavorites() {\n  try {\n    const favorites = localStorage.getItem(FAVORITES_KEY);\n    return favorites ? JSON.parse(favorites) : [];\n  } catch (error) {\n    return [];\n  }\n}\n\n// Add exercise ID to favorites\nexport function addToFavorites(exerciseId) {\n  try {\n    const favorites = getFavorites();\n    if (!favorites.includes(exerciseId)) {\n      favorites.push(exerciseId);\n      localStorage.setItem(FAVORITES_KEY, JSON.stringify(favorites));\n      return true;\n    }\n    return false;\n  } catch (error) {\n    return false;\n  }\n}\n\n// Remove exercise ID from favorites\nexport function removeFromFavorites(exerciseId) {\n  try {\n    const favorites = getFavorites();\n    const filteredFavorites = favorites.filter(id => id !== exerciseId);\n    localStorage.setItem(FAVORITES_KEY, JSON.stringify(filteredFavorites));\n    return true;\n  } catch (error) {\n    return false;\n  }\n}\n\n// Check if exercise is in favorites\nexport function isFavorite(exerciseId) {\n  const favorites = getFavorites();\n  return favorites.includes(exerciseId);\n}\n\n// Toggle favorite status (add if not exists, remove if exists)\nexport function toggleFavorite(exerciseId) {\n  if (isFavorite(exerciseId)) {\n    removeFromFavorites(exerciseId);\n    return false; // removed\n  } else {\n    addToFavorites(exerciseId);\n    return true; // added\n  }\n}\n\n","import { switchToHome, switchToFavorites } from './exercises.js';\n\n// Current active page\nlet currentPage = 'home';\n\n// Mobile menu elements\nlet mobileMenu = null;\nlet burgerButton = null;\nlet closeButton = null;\n\n// Switch page and update UI\nexport function switchPage(page) {\n  if (currentPage === page) return;\n\n  currentPage = page;\n  document.body.classList.toggle('is-favorites', page === 'favorites');\n\n  // Update nav links active state in desktop nav\n  const navLinks = document.querySelectorAll('.header__nav-link');\n  navLinks.forEach(link => {\n    const linkPage = link.getAttribute('data-page');\n    if (linkPage === page) {\n      link.classList.add('header__nav-link--active');\n    } else {\n      link.classList.remove('header__nav-link--active');\n    }\n  });\n\n  // Update nav links active state in mobile menu\n  const mobileNavLinks = document.querySelectorAll('.mobile-menu__nav-link');\n  mobileNavLinks.forEach(link => {\n    const linkPage = link.getAttribute('data-page');\n    if (linkPage === page) {\n      link.classList.add('mobile-menu__nav-link--active');\n    } else {\n      link.classList.remove('mobile-menu__nav-link--active');\n    }\n  });\n\n  // Call corresponding function to render content\n  if (page === 'home') {\n    switchToHome();\n  } else if (page === 'favorites') {\n    switchToFavorites();\n  }\n}\n\nfunction toggleMobileMenu(shouldOpen) {\n  if (!mobileMenu) return;\n  const isOpen = mobileMenu.classList.contains('is-open');\n  const nextState = typeof shouldOpen === 'boolean' ? shouldOpen : !isOpen;\n  mobileMenu.classList.toggle('is-open', nextState);\n  document.body.style.overflow = nextState ? 'hidden' : '';\n}\n\n// Initialize header event listeners\nexport function initHeader() {\n  // Desktop nav links\n  const nav = document.querySelector('.header__nav');\n  if (nav) {\n    nav.addEventListener('click', e => {\n      const link = e.target.closest('.header__nav-link');\n      if (!link) return;\n      e.preventDefault();\n      const page = link.getAttribute('data-page');\n      if (page) {\n        switchPage(page);\n      }\n    });\n  }\n\n  // Mobile menu elements\n  mobileMenu = document.querySelector('.mobile-menu');\n  burgerButton = document.querySelector('.header__burger');\n  closeButton = document.querySelector('.mobile-menu__close');\n\n  // Burger button\n  if (burgerButton) {\n    burgerButton.addEventListener('click', () => toggleMobileMenu());\n  }\n\n  // Close button\n  if (closeButton) {\n    closeButton.addEventListener('click', () => toggleMobileMenu(false));\n  }\n\n  // Mobile nav links\n  const mobileNav = document.querySelector('.mobile-menu__nav');\n  if (mobileNav) {\n    mobileNav.addEventListener('click', e => {\n      const link = e.target.closest('.mobile-menu__nav-link');\n      if (!link) return;\n      e.preventDefault();\n      const page = link.getAttribute('data-page');\n      if (page) {\n        switchPage(page);\n        toggleMobileMenu(false);\n      }\n    });\n  }\n\n  // Close menu on backdrop click\n  if (mobileMenu) {\n    mobileMenu.addEventListener('click', e => {\n      if (e.target === mobileMenu) {\n        toggleMobileMenu(false);\n      }\n    });\n  }\n}\n\n// Get current page\nexport function getCurrentPage() {\n  return currentPage;\n}\n","import { openRatingModal } from './rating-modal.js';\r\nimport {\r\n  isFavorite,\r\n  toggleFavorite,\r\n} from './favorites.js';\r\nimport { getCurrentPage } from './header.js';\r\nimport { loadFavoritesExercises } from './exercises.js';\r\n\r\n// Змінна для зберігання ID вправи для рейтингу\r\nlet currentExerciseIdForRating = null;\r\nlet exerciseModalKeydownHandler = null;\r\n\r\nfunction attachExerciseModalListeners() {\r\n  if (exerciseModalKeydownHandler) return;\r\n  exerciseModalKeydownHandler = event => {\r\n    if (event.key === 'Escape') {\r\n      closeExerciseModal();\r\n    }\r\n  };\r\n  document.addEventListener('keydown', exerciseModalKeydownHandler);\r\n}\r\n\r\nfunction detachExerciseModalListeners() {\r\n  if (!exerciseModalKeydownHandler) return;\r\n  document.removeEventListener('keydown', exerciseModalKeydownHandler);\r\n  exerciseModalKeydownHandler = null;\r\n}\r\n\r\n// Функція для закриття модального вікна\r\nfunction closeExerciseModal() {\r\n  const modal = document.getElementById('js-exercise-modal');\r\n  if (!modal) return;\r\n\r\n  modal.classList.remove('exercise-modal--open');\r\n  document.body.style.overflow = '';\r\n  detachExerciseModalListeners();\r\n}\r\n\r\n// Функція для відкриття модального вікна з даними вправи\r\nexport function openExerciseModal(exerciseId) {\r\n  const modal = document.getElementById('js-exercise-modal');\r\n  if (!modal) return;\r\n\r\n  // Зберігаємо ID вправи для рейтингу\r\n  currentExerciseIdForRating = exerciseId;\r\n\r\n  // Показуємо модальне вікно з індикатором завантаження\r\n  modal.classList.add('exercise-modal--open');\r\n  document.body.style.overflow = 'hidden';\r\n  attachExerciseModalListeners();\r\n\r\n  // Отримуємо елементи для заповнення\r\n  const image = document.getElementById('js-exercise-modal-image');\r\n  const title = document.getElementById('js-exercise-modal-title');\r\n  const ratingValue = document.querySelector('.exercise-modal__rating-value');\r\n  const ratingStars = document.querySelector('.exercise-modal__rating-stars');\r\n  const target = document.getElementById('js-exercise-modal-target');\r\n  const bodyPart = document.getElementById('js-exercise-modal-body-part');\r\n  const equipment = document.getElementById('js-exercise-modal-equipment');\r\n  const popular = document.getElementById('js-exercise-modal-popular');\r\n  const calories = document.getElementById('js-exercise-modal-calories');\r\n  const time = document.getElementById('js-exercise-modal-time');\r\n  const description = document.getElementById('js-exercise-modal-description');\r\n\r\n  // Очищаємо попередні дані\r\n  if (title) title.textContent = 'Loading...';\r\n  if (ratingValue) ratingValue.textContent = '0.0';\r\n  if (target) target.textContent = '';\r\n  if (bodyPart) bodyPart.textContent = '';\r\n  if (equipment) equipment.textContent = '';\r\n  if (popular) popular.textContent = '0';\r\n  if (calories) calories.textContent = '0';\r\n  if (time) time.textContent = '/0 min';\r\n  if (description) description.textContent = '';\r\n  if (image) image.src = '';\r\n\r\n  // Завантажуємо детальну інформацію про вправу\r\n  fetch(`https://your-energy.b.goit.study/api/exercises/${exerciseId}`)\r\n    .then(response => {\r\n      if (!response.ok) {\r\n        throw new Error('Failed to fetch exercise details');\r\n      }\r\n      return response.json();\r\n    })\r\n    .then(exercise => {\r\n      // Заповнюємо дані модального вікна\r\n      if (image) image.src = exercise.gifUrl || '';\r\n      if (title) title.textContent = exercise.name || '';\r\n      if (target) target.textContent = exercise.target || '';\r\n      if (bodyPart) bodyPart.textContent = exercise.bodyPart || '';\r\n      if (equipment) equipment.textContent = exercise.equipment || '';\r\n      if (popular) popular.textContent = exercise.popularity || 0;\r\n      if (calories) calories.textContent = exercise.burnedCalories || 0;\r\n      if (time) time.textContent = `/${exercise.time || 0} min`;\r\n      if (description) description.textContent = exercise.description || '';\r\n\r\n      // Оновлюємо рейтинг\r\n      if (ratingValue) {\r\n        ratingValue.textContent = (exercise.rating || 0).toFixed(1);\r\n      }\r\n\r\n      if (ratingStars) {\r\n        const stars = ratingStars.querySelectorAll(\r\n          '.exercise-modal__rating-star'\r\n        );\r\n        const rating = Math.round(exercise.rating || 0);\r\n\r\n        stars.forEach((star, index) => {\r\n          const path = star.querySelector('path');\r\n          if (index < rating) {\r\n            path.setAttribute('fill', '#EEA10C');\r\n            path.removeAttribute('stroke');\r\n            path.removeAttribute('stroke-width');\r\n          } else {\r\n            path.setAttribute('fill', 'none');\r\n            path.setAttribute('stroke', 'rgba(255,255,255,0.3)');\r\n            path.setAttribute('stroke-width', '1.5');\r\n          }\r\n        });\r\n      }\r\n\r\n      // Оновлюємо стан кнопки Favorites\r\n      updateFavoriteButton(exerciseId);\r\n\r\n      // Підключення кнопки \"Give a rating\"\r\n      const ratingBtn = document.getElementById('js-exercise-modal-rating-btn');\r\n      if (ratingBtn) {\r\n        // Видаляємо попередні обробники\r\n        const newRatingBtn = ratingBtn.cloneNode(true);\r\n        ratingBtn.parentNode.replaceChild(newRatingBtn, ratingBtn);\r\n\r\n        newRatingBtn.addEventListener('click', () => {\r\n          closeExerciseModal();\r\n          openRatingModal(exerciseId);\r\n        });\r\n      }\r\n    })\r\n    .catch(error => {\r\n      if (title) title.textContent = 'Error loading exercise';\r\n      if (description)\r\n        description.textContent =\r\n          'Failed to load exercise details. Please try again later.';\r\n    });\r\n}\r\n\r\n// Функція для оновлення стану кнопки Favorites\r\nfunction updateFavoriteButton(exerciseId) {\r\n  const favoriteBtn = document.getElementById('js-exercise-modal-favorites');\r\n  if (!favoriteBtn) return;\r\n\r\n  const isInFavorites = isFavorite(exerciseId);\r\n  const btnText = favoriteBtn.querySelector('span');\r\n  const btnIcon = favoriteBtn.querySelector('svg path');\r\n\r\n  if (isInFavorites) {\r\n    favoriteBtn.classList.add('active');\r\n    if (btnText) btnText.textContent = 'Remove from favorites';\r\n    if (btnIcon) {\r\n      btnIcon.setAttribute('fill', 'currentColor');\r\n      btnIcon.removeAttribute('stroke');\r\n      btnIcon.removeAttribute('stroke-width');\r\n    }\r\n  } else {\r\n    favoriteBtn.classList.remove('active');\r\n    if (btnText) btnText.textContent = 'Add to favorites';\r\n    if (btnIcon) {\r\n      btnIcon.setAttribute('fill', 'none');\r\n      btnIcon.setAttribute('stroke', 'currentColor');\r\n      btnIcon.setAttribute('stroke-width', '2');\r\n    }\r\n  }\r\n}\r\n\r\n// Експорт функції закриття для використання в інших модулях\r\nexport { closeExerciseModal };\r\n\r\n// Ініціалізація event listeners для модального вікна\r\nexport function initExerciseModal() {\r\n  // Обробники для модального вікна\r\n  const modalCloseBtn = document.getElementById('js-exercise-modal-close');\r\n  const modal = document.getElementById('js-exercise-modal');\r\n  const modalOverlay = modal?.querySelector('.exercise-modal__overlay');\r\n\r\n  if (modalCloseBtn) {\r\n    modalCloseBtn.addEventListener('click', closeExerciseModal);\r\n  }\r\n\r\n  if (modalOverlay) {\r\n    modalOverlay.addEventListener('click', closeExerciseModal);\r\n  }\r\n\r\n  // Обробник для кнопки Favorites\r\n  const favoriteBtn = document.getElementById('js-exercise-modal-favorites');\r\n  if (favoriteBtn) {\r\n    favoriteBtn.addEventListener('click', () => {\r\n      const exerciseId = currentExerciseIdForRating;\r\n      if (!exerciseId) return;\r\n\r\n      const wasAdded = toggleFavorite(exerciseId);\r\n      updateFavoriteButton(exerciseId);\r\n\r\n      // Якщо користувач на сторінці Favorites і видаляє вправу\r\n      if (!wasAdded && getCurrentPage() === 'favorites') {\r\n        closeExerciseModal();\r\n        loadFavoritesExercises();\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\n","import { openExerciseModal } from './exercise-modal.js';\r\nimport { getFavorites } from './favorites.js';\r\n\r\n// Глобальні змінні для фільтра та сторінки\r\nlet currentFilter = 'Muscles';\r\nlet currentPage = 1;\r\nlet currentCategory = null;\r\nlet currentSearchKeyword = '';\r\nlet currentMode = 'home'; // 'home' або 'favorites'\r\n\r\n// Функція для показу поля пошуку\r\nfunction showSearchField() {\r\n  const searchField = document.getElementById('js-exercises-search');\r\n  if (searchField) {\r\n    searchField.style.display = 'flex';\r\n  }\r\n}\r\n\r\n// Функція для приховування поля пошуку\r\nfunction hideSearchField() {\r\n  const searchField = document.getElementById('js-exercises-search');\r\n  const searchInput = document.getElementById('js-exercises-search-input');\r\n  if (searchField) {\r\n    searchField.style.display = 'none';\r\n  }\r\n  if (searchInput) {\r\n    searchInput.value = '';\r\n  }\r\n  currentSearchKeyword = '';\r\n}\r\n\r\n// Функція для ініціалізації слухача подій на контейнері карток (event delegation)\r\nexport function initCardsEventListener() {\r\n  const cardsContainer = document.querySelector(\r\n    '.exercises__content__main__cards'\r\n  );\r\n\r\n  if (!cardsContainer) {\r\n    return;\r\n  }\r\n\r\n  // Один слухач на весь контейнер замість багатьох на кожній картці\r\n  cardsContainer.addEventListener('click', event => {\r\n    // Знаходимо найближчу картку від місця кліку\r\n    const card = event.target.closest('.exercises__content__main__cards-item');\r\n\r\n    if (!card) {\r\n      return;\r\n    }\r\n\r\n    // Перевіряємо, чи це картка категорії\r\n    const categoryName = card.getAttribute('data-category-name');\r\n    if (categoryName) {\r\n      loadExercisesByCategory(categoryName);\r\n      return;\r\n    }\r\n\r\n    // Перевіряємо, чи це картка вправи\r\n    const exerciseId = card.getAttribute('data-exercise-id');\r\n    if (exerciseId) {\r\n      openExerciseModal(exerciseId);\r\n      return;\r\n    }\r\n  });\r\n}\r\n\r\n// Функція для створення HTML картки категорії\r\nfunction createExerciseCard(exercise) {\r\n  return `\r\n    <li class=\"exercises__content__main__cards-item\" data-category-name=\"${exercise.name}\">\r\n      <div class=\"exercises__content__main__cards-item-image\">\r\n        <img src=\"${exercise.imgURL}\" alt=\"${exercise.name} exercise\" loading=\"lazy\" decoding=\"async\" />\r\n        <div class=\"exercises__content__main__cards-item-overlay\">\r\n          <div class=\"exercises__content__main__cards-item-overlay-name\">${exercise.name}</div>\r\n          <div class=\"exercises__content__main__cards-item-overlay-category\">${exercise.filter}</div>\r\n        </div>\r\n      </div>\r\n    </li>\r\n  `;\r\n}\r\n\r\n// Функція для створення HTML картки вправи\r\nfunction createExerciseItemCard(exercise) {\r\n  const rating = exercise.rating || 0;\r\n  const burnedCalories = exercise.burnedCalories || 0;\r\n  const time = exercise.time || 0;\r\n  const bodyPart = exercise.bodyPart || '';\r\n  const target = exercise.target || '';\r\n  const exerciseId = exercise._id || '';\r\n\r\n  return `\r\n    <li class=\"exercises__content__main__cards-item exercises__content__main__cards-item--exercise\" data-exercise-id=\"${exerciseId}\">\r\n      <div class=\"exercises__content__main__cards-item-header\">\r\n        <button class=\"exercises__content__main__cards-item-workout-btn\" type=\"button\">WORKOUT</button>\r\n        <div class=\"exercises__content__main__cards-item-rating\">\r\n          <span class=\"exercises__content__main__cards-item-rating-value\">${rating.toFixed(\r\n            1\r\n          )}</span>\r\n          <svg class=\"exercises__content__main__cards-item-rating-star\" width=\"18\" height=\"18\" viewBox=\"0 0 18 18\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n            <path d=\"M9 0L11.0206 6.21885L17.5595 6.21885L12.2694 10.0623L14.2901 16.2812L9 12.4377L3.70993 16.2812L5.73056 10.0623L0.440492 6.21885L6.97937 6.21885L9 0Z\" fill=\"#EEA10C\"/>\r\n          </svg>\r\n        </div>\r\n        <button class=\"exercises__content__main__cards-item-start-btn\" type=\"button\">\r\n          Start\r\n          <svg width=\"18\" height=\"18\" viewBox=\"0 0 18 18\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n            <path d=\"M6.75 4.5L11.25 9L6.75 13.5\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n          </svg>\r\n        </button>\r\n      </div>\r\n      <div class=\"exercises__content__main__cards-item-body\">\r\n        <div class=\"exercises__content__main__cards-item-icon\">\r\n          <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n            <path d=\"M12 2L2 7L12 12L22 7L12 2Z\" stroke=\"white\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n            <path d=\"M2 17L12 22L22 17\" stroke=\"white\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n            <path d=\"M2 12L12 17L22 12\" stroke=\"white\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n          </svg>\r\n        </div>\r\n        <h3 class=\"exercises__content__main__cards-item-title\">${\r\n          exercise.name\r\n        }</h3>\r\n      </div>\r\n      <div class=\"exercises__content__main__cards-item-footer\">\r\n        <div class=\"exercises__content__main__cards-item-info\">\r\n          <span class=\"exercises__content__main__cards-item-info-label\">Burned calories:</span>\r\n          <span class=\"exercises__content__main__cards-item-info-value\">${burnedCalories}</span>\r\n          <span class=\"exercises__content__main__cards-item-info-label\">/ ${time} min</span>\r\n        </div>\r\n        <div class=\"exercises__content__main__cards-item-info\">\r\n          <span class=\"exercises__content__main__cards-item-info-label\">Body part:</span>\r\n          <span class=\"exercises__content__main__cards-item-info-value\">${bodyPart}</span>\r\n        </div>\r\n        <div class=\"exercises__content__main__cards-item-info\">\r\n          <span class=\"exercises__content__main__cards-item-info-label\">Target:</span>\r\n          <span class=\"exercises__content__main__cards-item-info-value\">${target}</span>\r\n        </div>\r\n      </div>\r\n    </li>\r\n  `;\r\n}\r\n\r\n// Функція для рендерингу карток категорій\r\nfunction renderExerciseCards(exercises) {\r\n  const cardsContainer = document.querySelector(\r\n    '.exercises__content__main__cards'\r\n  );\r\n\r\n  if (!cardsContainer) {\r\n    return;\r\n  }\r\n\r\n  // Видаляємо клас для карток вправ (якщо був)\r\n  cardsContainer.classList.remove('exercises__content__main__cards--exercises');\r\n\r\n  // Очищаємо контейнер\r\n  cardsContainer.innerHTML = '';\r\n\r\n  // Рендеримо кожну картку\r\n  exercises.forEach(exercise => {\r\n    const cardHTML = createExerciseCard(exercise);\r\n    cardsContainer.insertAdjacentHTML('beforeend', cardHTML);\r\n  });\r\n}\r\n\r\n// Функція для рендерингу карток вправ\r\nfunction renderExerciseItemCards(exercises) {\r\n  const cardsContainer = document.querySelector(\r\n    '.exercises__content__main__cards'\r\n  );\r\n\r\n  if (!cardsContainer) {\r\n    return;\r\n  }\r\n\r\n  // Додаємо клас для карток вправ\r\n  cardsContainer.classList.add('exercises__content__main__cards--exercises');\r\n\r\n  // Очищаємо контейнер\r\n  cardsContainer.innerHTML = '';\r\n\r\n  // Рендеримо кожну картку\r\n  exercises.forEach(exercise => {\r\n    const cardHTML = createExerciseItemCard(exercise);\r\n    cardsContainer.insertAdjacentHTML('beforeend', cardHTML);\r\n  });\r\n}\r\n\r\n// Функція для відображення empty state\r\nfunction renderEmptyState() {\r\n  const cardsContainer = document.querySelector(\r\n    '.exercises__content__main__cards'\r\n  );\r\n\r\n  if (!cardsContainer) {\r\n    return;\r\n  }\r\n\r\n  // Додаємо клас для карток вправ\r\n  cardsContainer.classList.add('exercises__content__main__cards--exercises');\r\n\r\n  // Очищаємо контейнер\r\n  cardsContainer.innerHTML = '';\r\n\r\n  // Додаємо empty state\r\n  const emptyStateHTML = `\r\n    <li class=\"exercises__content__main__empty-state\">\r\n      <p class=\"exercises__content__main__empty-state-text\">\r\n        Unfortunately, no results were found. You may want to consider other search options.\r\n      </p>\r\n    </li>\r\n  `;\r\n\r\n  cardsContainer.insertAdjacentHTML('beforeend', emptyStateHTML);\r\n}\r\n\r\n// Функція для оновлення breadcrumbs\r\nexport function updateBreadcrumbs(categoryName = null) {\r\n  const breadcrumbsContainer = document.getElementById(\r\n    'js-exercises-breadcrumbs'\r\n  );\r\n\r\n  if (!breadcrumbsContainer) {\r\n    return;\r\n  }\r\n\r\n  const breadcrumbsList = breadcrumbsContainer.querySelector(\r\n    '.exercises__content__header-breadcrumbs-list'\r\n  );\r\n  if (!breadcrumbsList) {\r\n    return;\r\n  }\r\n\r\n  breadcrumbsList.innerHTML = '';\r\n\r\n  const createCrumb = (label, isActive, onClick, isTitle = false) => {\r\n    const listItem = document.createElement('li');\r\n    listItem.className = 'exercises__content__header-breadcrumbs-item';\r\n\r\n    const button = document.createElement('button');\r\n    button.type = 'button';\r\n    button.className = 'exercises__content__header-breadcrumbs-button';\r\n    button.textContent = label;\r\n\r\n    if (isTitle) {\r\n      button.classList.add('exercises__content__header-title');\r\n    }\r\n\r\n    if (isActive) {\r\n      button.classList.add(\r\n        'exercises__content__header-breadcrumbs-button--active'\r\n      );\r\n    }\r\n\r\n    if (onClick) {\r\n      button.addEventListener('click', onClick);\r\n    }\r\n\r\n    listItem.appendChild(button);\r\n    return listItem;\r\n  };\r\n\r\n  // ???? ????? Favorites - ????????? ?????? ????????? \"Favorites\"\r\n  if (currentMode === 'favorites') {\r\n    const favoritesItem = createCrumb('Favorites', true, null, true);\r\n    favoritesItem.setAttribute('data-breadcrumb', 'favorites');\r\n    breadcrumbsList.appendChild(favoritesItem);\r\n    return;\r\n  }\r\n\r\n  const exercisesItem = createCrumb('Exercises', !categoryName, () => {\n    currentCategory = null;\n    currentPage = 1;\n    loadExerciseCards(currentFilter, currentPage);\n  }, true);\n\r\n  exercisesItem.setAttribute('data-breadcrumb', 'exercises');\r\n  breadcrumbsList.appendChild(exercisesItem);\r\n\r\n  // ???? ? ?????????, ??????? ??\r\n  if (categoryName) {\r\n    const separator = document.createElement('span');\r\n    separator.className = 'exercises__content__header-breadcrumbs-separator';\r\n    separator.textContent = '/';\r\n    const separatorItem = document.createElement('li');\r\n    separatorItem.className = 'exercises__content__header-breadcrumbs-item';\r\n    separatorItem.appendChild(separator);\r\n    breadcrumbsList.appendChild(separatorItem);\r\n\r\n    const categoryItem = createCrumb(categoryName, true);\r\n    breadcrumbsList.appendChild(categoryItem);\r\n  }\r\n}\r\n\r\n// Функція для рендерингу пагінації\r\nfunction renderPagination(totalPages, page = 1) {\r\n  const paginationContainer = document.querySelector(\r\n    '.exercises__content__pagination'\r\n  );\r\n\r\n  if (!paginationContainer) {\r\n    return;\r\n  }\r\n\r\n  // Очищаємо контейнер\r\n  paginationContainer.innerHTML = '';\r\n\r\n  // Якщо одна або жодної сторінки - не відображаємо пагінацію\r\n  if (totalPages <= 1) {\r\n    return;\r\n  }\r\n\r\n  // Функція для переходу на сторінку\r\n  const goToPage = pageNumber => {\r\n    currentPage = pageNumber;\r\n    if (currentCategory) {\r\n      loadExercisesByCategory(currentCategory, pageNumber);\r\n    } else {\r\n      loadExerciseCards(currentFilter, pageNumber);\r\n    }\r\n  };\r\n\r\n  // Кнопка \"На першу сторінку\"\r\n  const firstButton = document.createElement('button');\r\n  firstButton.className = 'exercises__content__pagination-arrow';\r\n  firstButton.innerHTML = '&laquo;';\r\n  firstButton.disabled = page === 1;\r\n  firstButton.addEventListener('click', () => goToPage(1));\r\n  paginationContainer.appendChild(firstButton);\r\n\r\n  // Кнопка \"Попередня сторінка\"\r\n  const prevButton = document.createElement('button');\r\n  prevButton.className = 'exercises__content__pagination-arrow';\r\n  prevButton.innerHTML = '&lsaquo;';\r\n  prevButton.disabled = page === 1;\r\n  prevButton.addEventListener('click', () => goToPage(page - 1));\r\n  paginationContainer.appendChild(prevButton);\r\n\r\n  // Функція для створення кнопки сторінки\r\n  const createPageButton = pageNumber => {\r\n    const pageButton = document.createElement('button');\r\n    pageButton.className = 'exercises__content__pagination-page';\r\n    pageButton.textContent = pageNumber;\r\n\r\n    if (pageNumber === page) {\r\n      pageButton.classList.add('exercises__content__pagination-page--active');\r\n    }\r\n\r\n    pageButton.addEventListener('click', () => goToPage(pageNumber));\r\n    return pageButton;\r\n  };\r\n\r\n  // Логіка відображення номерів сторінок\r\n  if (totalPages <= 5) {\r\n    // Відображаємо всі сторінки\r\n    for (let i = 1; i <= totalPages; i++) {\r\n      paginationContainer.appendChild(createPageButton(i));\r\n    }\r\n  } else {\r\n    // Відображаємо 1, 2, 3, ..., передостання, остання\r\n    paginationContainer.appendChild(createPageButton(1));\r\n    paginationContainer.appendChild(createPageButton(2));\r\n    paginationContainer.appendChild(createPageButton(3));\r\n\r\n    // Додаємо ellipsis\r\n    const ellipsis = document.createElement('span');\r\n    ellipsis.className = 'exercises__content__pagination-ellipsis';\r\n    ellipsis.textContent = '...';\r\n    paginationContainer.appendChild(ellipsis);\r\n\r\n    // Передостання сторінка\r\n    paginationContainer.appendChild(createPageButton(totalPages - 1));\r\n\r\n    // Остання сторінка\r\n    paginationContainer.appendChild(createPageButton(totalPages));\r\n  }\r\n\r\n  // Кнопка \"Наступна сторінка\"\r\n  const nextButton = document.createElement('button');\r\n  nextButton.className = 'exercises__content__pagination-arrow';\r\n  nextButton.innerHTML = '&rsaquo;';\r\n  nextButton.disabled = page === totalPages;\r\n  nextButton.addEventListener('click', () => goToPage(page + 1));\r\n  paginationContainer.appendChild(nextButton);\r\n\r\n  // Кнопка \"На останню сторінку\"\r\n  const lastButton = document.createElement('button');\r\n  lastButton.className = 'exercises__content__pagination-arrow';\r\n  lastButton.innerHTML = '&raquo;';\r\n  lastButton.disabled = page === totalPages;\r\n  lastButton.addEventListener('click', () => goToPage(totalPages));\r\n  paginationContainer.appendChild(lastButton);\r\n}\r\n\r\n// Функція для завантаження карток категорій\r\nexport function loadExerciseCards(filter, page = 1) {\r\n  currentFilter = filter;\r\n  currentPage = page;\r\n\r\n  // Приховуємо поле пошуку при переході до списку категорій\r\n  hideSearchField();\r\n\r\n  // Кодуємо параметри для безпечного передавання в URL\r\n  const encodedFilter = encodeURIComponent(filter);\r\n  const url = `https://your-energy.b.goit.study/api/filters?filter=${encodedFilter}&page=${page}`;\r\n\r\n  fetch(url)\r\n    .then(response => response.json())\r\n    .then(data => {\r\n      // Припускаємо, що API повертає масив exercises або об'єкт з полем results/exercises\r\n      const exercises = data.results || data.exercises || data || [];\r\n\r\n      // Отримуємо загальну кількість сторінок\r\n      const totalPages =\r\n        data.totalPages || data.total_pages || data.pageCount || 1;\r\n\r\n      if (Array.isArray(exercises) && exercises.length > 0) {\r\n        currentCategory = null; // Скидаємо поточну категорію\r\n        updateBreadcrumbs(null);\r\n        renderExerciseCards(exercises);\r\n        renderPagination(totalPages, page);\r\n      } else {\r\n        updateBreadcrumbs(null);\r\n        renderPagination(1, 1);\r\n      }\r\n    })\r\n}\r\n\r\n// Функція для завантаження вправ за категорією\r\nexport function loadExercisesByCategory(\r\n  categoryName,\r\n  page = 1,\r\n  keyword = currentSearchKeyword\r\n) {\r\n  currentCategory = categoryName;\r\n  currentPage = page;\r\n  currentSearchKeyword = keyword;\r\n\r\n  // Показуємо поле пошуку\r\n  showSearchField();\r\n\r\n  // Визначаємо параметр залежно від типу фільтра\r\n  let paramName = '';\r\n  if (currentFilter === 'Muscles') {\r\n    paramName = 'muscles';\r\n  } else if (currentFilter === 'Body parts') {\r\n    paramName = 'bodyPart';\r\n  } else if (currentFilter === 'Equipment') {\r\n    paramName = 'equipment';\r\n  }\r\n\r\n  // Кодуємо параметри для безпечного передавання в URL\r\n  const encodedCategory = encodeURIComponent(categoryName);\r\n  let url = `https://your-energy.b.goit.study/api/exercises?${paramName}=${encodedCategory}&page=${page}&limit=10`;\r\n\r\n  // Додаємо параметр пошуку якщо він є\r\n  if (keyword && keyword.trim() !== '') {\r\n    const encodedKeyword = encodeURIComponent(keyword.trim());\r\n    url += `&keyword=${encodedKeyword}`;\r\n  }\r\n\r\n  fetch(url)\r\n    .then(response => response.json())\r\n    .then(data => {\r\n      // Отримуємо масив вправ\r\n      const exercises = data.results || [];\r\n\r\n      // Отримуємо загальну кількість сторінок\r\n      const totalPages = data.totalPages || 1;\r\n\r\n      updateBreadcrumbs(categoryName);\r\n\r\n      if (Array.isArray(exercises) && exercises.length > 0) {\r\n        renderExerciseItemCards(exercises);\r\n        renderPagination(totalPages, page);\r\n      } else {\r\n        // Показуємо empty state\r\n        renderEmptyState();\r\n        // Приховуємо пагінацію\r\n        const paginationContainer = document.querySelector(\r\n          '.exercises__content__pagination'\r\n        );\r\n        if (paginationContainer) {\r\n          paginationContainer.innerHTML = '';\r\n        }\r\n      }\r\n    })\r\n}\r\n\r\n// Функція для ініціалізації обробників пошуку\r\nexport function initSearch() {\r\n  const searchInput = document.getElementById('js-exercises-search-input');\r\n\r\n  if (!searchInput) {\r\n    return;\r\n  }\r\n\r\n  let searchTimeout = null;\r\n\r\n  // Обробка введення тексту з затримкою 1 секунда\r\n  searchInput.addEventListener('input', () => {\r\n    // Очищаємо попередній таймер\r\n    if (searchTimeout) {\r\n      clearTimeout(searchTimeout);\r\n    }\r\n\r\n    // Встановлюємо новий таймер\r\n    searchTimeout = setTimeout(() => {\r\n      const keyword = searchInput.value.trim();\r\n      if (currentCategory) {\r\n        loadExercisesByCategory(currentCategory, 1, keyword);\r\n      }\r\n    }, 1000);\r\n  });\r\n}\r\n\r\n// Функція для відображення empty state для favorites\r\nfunction renderFavoritesEmptyState() {\r\n  const cardsContainer = document.querySelector(\r\n    '.exercises__content__main__cards'\r\n  );\r\n\r\n  if (!cardsContainer) {\r\n    return;\r\n  }\r\n\r\n  // Додаємо клас для карток вправ\r\n  cardsContainer.classList.add('exercises__content__main__cards--exercises');\r\n\r\n  // Очищаємо контейнер\r\n  cardsContainer.innerHTML = '';\r\n\r\n  // Додаємо empty state\r\n  const emptyStateHTML = `\r\n    <li class=\"exercises__content__main__empty-state\">\r\n      <p class=\"exercises__content__main__empty-state-text\">\r\n        It appears that you haven't added any exercises to your favorites yet. \r\n        To get started, you can add exercises that you like to your favorites \r\n        for easier access in the future.\r\n      </p>\r\n    </li>\r\n  `;\r\n\r\n  cardsContainer.insertAdjacentHTML('beforeend', emptyStateHTML);\r\n}\r\n\r\n// Функція для завантаження вправ з обраного\r\nexport function loadFavoritesExercises() {\r\n  const favoriteIds = getFavorites();\r\n\r\n  // Оновлюємо breadcrumbs\r\n  updateBreadcrumbs(null);\r\n\r\n  // Приховуємо пагінацію\r\n  const paginationContainer = document.querySelector(\r\n    '.exercises__content__pagination'\r\n  );\r\n  if (paginationContainer) {\r\n    paginationContainer.innerHTML = '';\r\n  }\r\n\r\n  // Якщо немає обраних вправ\r\n  if (favoriteIds.length === 0) {\r\n    renderFavoritesEmptyState();\r\n    return;\r\n  }\r\n\r\n  // Завантажуємо деталі кожної вправи\r\n  const promises = favoriteIds.map(id =>\r\n    fetch(`https://your-energy.b.goit.study/api/exercises/${id}`)\r\n      .then(response => {\r\n        if (!response.ok) {\r\n          throw new Error('Failed to fetch exercise');\r\n        }\r\n        return response.json();\r\n      })\r\n      .catch(error => {\r\n        return null;\r\n      })\r\n  );\r\n\r\n  Promise.all(promises).then(exercises => {\r\n    // Фільтруємо null значення (вправи, які не вдалося завантажити)\r\n    const validExercises = exercises.filter(ex => ex !== null);\r\n\r\n    if (validExercises.length > 0) {\r\n      renderExerciseItemCards(validExercises);\r\n    } else {\r\n      renderFavoritesEmptyState();\r\n    }\r\n  });\r\n}\r\n\r\n// Функція для перемикання в режим Home\r\nexport function switchToHome() {\r\n  currentMode = 'home';\r\n  currentCategory = null;\r\n  currentSearchKeyword = '';\r\n\r\n  // Показуємо фільтри\r\n  const filtersContainer = document.querySelector(\r\n    '.exercises__content__header-filters'\r\n  );\r\n  if (filtersContainer) {\r\n    filtersContainer.style.display = 'flex';\r\n  }\r\n\r\n  // Видаляємо клас favorites з контейнера\r\n  const contentContainer = document.querySelector('.exercises__content');\r\n  if (contentContainer) {\r\n    contentContainer.classList.remove('exercises__content--favorites');\r\n  }\r\n\r\n  // Завантажуємо стандартні картки\r\n  loadExerciseCards(currentFilter, 1);\r\n}\r\n\r\n// Функція для перемикання в режим Favorites\r\nexport function switchToFavorites() {\r\n  currentMode = 'favorites';\r\n  currentCategory = null;\r\n  currentSearchKeyword = '';\r\n\r\n  // Приховуємо фільтри та пошук\r\n  const filtersContainer = document.querySelector(\r\n    '.exercises__content__header-filters'\r\n  );\r\n  if (filtersContainer) {\r\n    filtersContainer.style.display = 'none';\r\n  }\r\n\r\n  hideSearchField();\r\n\r\n  // Додаємо клас favorites до контейнера\r\n  const contentContainer = document.querySelector('.exercises__content');\r\n  if (contentContainer) {\r\n    contentContainer.classList.add('exercises__content--favorites');\r\n  }\r\n\r\n  // Завантажуємо обрані вправи\r\n  loadFavoritesExercises();\r\n}\r\n","// Helper function to get today's date in YYYY-MM-DD format\nfunction getTodayDate() {\n  const today = new Date();\n  const year = today.getFullYear();\n  const month = String(today.getMonth() + 1).padStart(2, '0');\n  const day = String(today.getDate()).padStart(2, '0');\n  return `${year}-${month}-${day}`;\n}\n\n// Function to load quote data with caching logic\nasync function loadQuoteOfTheDay() {\n  const cachedQuoteText = localStorage.getItem('quote-text');\n  const cachedQuoteAuthor = localStorage.getItem('quote-author');\n  const cachedQuoteDate = localStorage.getItem('quote-date');\n  const todayDate = getTodayDate();\n\n  // Check if cached data exists\n  if (cachedQuoteText && cachedQuoteAuthor && cachedQuoteDate) {\n    // Compare dates\n    if (cachedQuoteDate === todayDate) {\n      // Return cached data if date matches\n      return { quote: cachedQuoteText, author: cachedQuoteAuthor };\n    }\n  }\n\n  // Fetch new quote from API\n  try {\n    const response = await fetch('https://your-energy.b.goit.study/api/quote');\n    const data = await response.json();\n\n    // Save to localStorage\n    localStorage.setItem('quote-text', data.quote);\n    localStorage.setItem('quote-author', data.author);\n    localStorage.setItem('quote-date', todayDate);\n\n    // Return the quote data\n    return { quote: data.quote, author: data.author };\n  } catch (error) {\n    // If fetch fails but we have cached data, use it\n    if (cachedQuoteText && cachedQuoteAuthor) {\n      return { quote: cachedQuoteText, author: cachedQuoteAuthor };\n    }\n\n    // Return null if no data available\n    return null;\n  }\n}\n\n// Function to display quote in DOM\nexport async function displayQuote() {\n  const quoteData = await loadQuoteOfTheDay();\n\n  if (!quoteData) {\n    return;\n  }\n\n  const quoteTextElement = document.getElementById('js-exercises-quote-text');\n  const quoteAuthorElement = document.getElementById(\n    'js-exercises-quote-author'\n  );\n\n  if (quoteTextElement) {\n    quoteTextElement.textContent = quoteData.quote;\n  }\n\n  if (quoteAuthorElement) {\n    quoteAuthorElement.textContent = quoteData.author;\n  }\n}\n","import {\r\n  loadExerciseCards,\r\n  updateBreadcrumbs,\r\n  initSearch,\r\n  initCardsEventListener,\r\n} from './js/exercises.js';\r\nimport { initExerciseModal } from './js/exercise-modal.js';\nimport { initRatingModal } from './js/rating-modal.js';\nimport {\r\n  initGlobalNotification,\r\n  showGlobalNotification,\r\n} from './js/global-notification.js';\r\nimport {\r\n  showFieldError,\r\n  hideFieldError,\r\n  validateEmail,\r\n} from './js/form-validation.js';\r\nimport { initHeader } from './js/header.js';\r\nimport { displayQuote } from './js/quote.js';\r\n\r\n// Load and display quote of the day\r\ndisplayQuote();\r\n\r\n// Функція для відправки запиту на оформлення підписки\r\nasync function subscribeToNewsletter(email) {\r\n  try {\r\n    const response = await fetch(\r\n      'https://your-energy.b.goit.study/api/subscription',\r\n      {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n          email: email.trim(),\r\n        }),\r\n      }\r\n    );\r\n\r\n    const data = await response.json().catch(() => ({}));\r\n    if (!response.ok) {\r\n      const errorMessage =\r\n        data.message || 'Failed to subscribe. Please try again later.';\r\n      throw new Error(errorMessage);\r\n    }\r\n    return { success: true, data };\r\n  } catch (error) {\r\n    return { success: false, error: error.message };\r\n  }\r\n}\r\n\r\n// Початкове завантаження та ініціалізація\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n  // Ініціалізація модалок\r\n  initExerciseModal();\r\n  initRatingModal();\r\n\r\n  // Ініціалізація глобальних повідомлень\r\n  initGlobalNotification();\r\n\r\n  // Ініціалізація хедера\r\n  initHeader();\r\n\r\n  // Ініціалізація пошуку\r\n  initSearch();\r\n\r\n  // Ініціалізація слухача подій на контейнері карток (event delegation)\r\n  initCardsEventListener();\r\n\r\n  // Початкове завантаження карток\r\n  loadExerciseCards('Muscles', 1);\r\n\r\n  // ??????? ?????? ?? ??????? ????? ???????????\r\n  const filtersContainer = document.querySelector(\r\n    '.exercises__content__header-filters'\r\n  );\r\n  if (filtersContainer) {\r\n    filtersContainer.addEventListener('click', event => {\r\n      const button = event.target.closest(\r\n        '.exercises__content__header-filters-item'\r\n      );\r\n      if (!button) {\r\n        return;\r\n      }\r\n\r\n      const filterButtons = filtersContainer.querySelectorAll(\r\n        '.exercises__content__header-filters-item'\r\n      );\r\n      filterButtons.forEach(btn =>\r\n        btn.classList.remove('exercises__content__header-filters-item--active')\r\n      );\r\n\r\n      button.classList.add('exercises__content__header-filters-item--active');\r\n\r\n      const filter = button.getAttribute('data-filter');\r\n      updateBreadcrumbs(null);\r\n      loadExerciseCards(filter, 1);\r\n    });\r\n  }\r\n\r\n  // Обробка форми підписки\r\n  const subscribeForm = document.getElementById('subscribeForm');\r\n  const subscribeEmailInput = document.getElementById('subscribeEmail');\r\n  const subscribeEmailError = document.getElementById('subscribeEmailError');\r\n\r\n  // Clear error on input\r\n  if (subscribeEmailInput && subscribeEmailError) {\r\n    subscribeEmailInput.addEventListener('input', () => {\r\n      hideFieldError(subscribeEmailInput, subscribeEmailError);\r\n    });\r\n  }\r\n\r\n  if (subscribeForm) {\r\n    subscribeForm.addEventListener('submit', async e => {\r\n      e.preventDefault();\r\n\r\n      const email = subscribeEmailInput?.value.trim() || '';\r\n      let hasErrors = false;\r\n\r\n      // Validate email\r\n      if (!email) {\r\n        showFieldError(\r\n          subscribeEmailInput,\r\n          subscribeEmailError,\r\n          'Please enter your email address'\r\n        );\r\n        hasErrors = true;\r\n      } else if (!validateEmail(email)) {\r\n        showFieldError(\r\n          subscribeEmailInput,\r\n          subscribeEmailError,\r\n          'Please enter a valid email address'\r\n        );\r\n        hasErrors = true;\r\n      } else {\r\n        hideFieldError(subscribeEmailInput, subscribeEmailError);\r\n      }\r\n\r\n      // Stop if there are errors\r\n      if (hasErrors) {\r\n        return;\r\n      }\r\n\r\n      const result = await subscribeToNewsletter(email);\r\n\r\n      if (result.success) {\r\n        showGlobalNotification(result.data.message, 'success');\r\n        subscribeForm.reset();\r\n        hideFieldError(subscribeEmailInput, subscribeEmailError);\r\n      } else {\r\n        showGlobalNotification(result.error, 'error');\r\n      }\r\n    });\r\n  }\r\n});\r\n"],"names":["notificationTimeout","showGlobalNotification","message","type","notification","textElement","hideGlobalNotification","initGlobalNotification","closeBtn","showFieldError","inputElement","errorElement","errorClass","hideFieldError","validateEmail","email","currentExerciseIdForRating","ratingModalKeydownHandler","attachRatingModalListeners","event","closeRatingModal","detachRatingModalListeners","showServerMessage","messageElement","messageTextElement","hideServerMessage","modal","emailInput","emailError","commentTextarea","commentError","ratingError","openRatingModal","exerciseId","form","ratingValue","stars","star","svg","path","initRatingModal","ratingModalCloseBtn","ratingModal","ratingModalOverlay","serverMessageCloseBtn","ratingStars","selectedRating","index","s","i","hoverRating","ratingForm","e","hasErrors","review","response","data","exerciseName","error","errorMessage","FAVORITES_KEY","getFavorites","favorites","addToFavorites","removeFromFavorites","filteredFavorites","id","isFavorite","toggleFavorite","currentPage","mobileMenu","burgerButton","closeButton","switchPage","page","link","switchToHome","switchToFavorites","toggleMobileMenu","shouldOpen","isOpen","nextState","initHeader","nav","mobileNav","getCurrentPage","exerciseModalKeydownHandler","attachExerciseModalListeners","closeExerciseModal","detachExerciseModalListeners","openExerciseModal","image","title","target","bodyPart","equipment","popular","calories","time","description","exercise","rating","updateFavoriteButton","ratingBtn","newRatingBtn","favoriteBtn","isInFavorites","btnText","btnIcon","initExerciseModal","modalCloseBtn","modalOverlay","wasAdded","loadFavoritesExercises","currentFilter","currentCategory","currentSearchKeyword","currentMode","showSearchField","searchField","hideSearchField","searchInput","initCardsEventListener","cardsContainer","card","categoryName","loadExercisesByCategory","createExerciseCard","createExerciseItemCard","burnedCalories","renderExerciseCards","exercises","cardHTML","renderExerciseItemCards","renderEmptyState","updateBreadcrumbs","breadcrumbsContainer","breadcrumbsList","createCrumb","label","isActive","onClick","isTitle","listItem","button","favoritesItem","exercisesItem","loadExerciseCards","separator","separatorItem","categoryItem","renderPagination","totalPages","paginationContainer","goToPage","pageNumber","firstButton","prevButton","createPageButton","pageButton","ellipsis","nextButton","lastButton","filter","url","keyword","paramName","encodedCategory","encodedKeyword","initSearch","searchTimeout","renderFavoritesEmptyState","favoriteIds","promises","validExercises","ex","filtersContainer","contentContainer","getTodayDate","today","year","month","day","loadQuoteOfTheDay","cachedQuoteText","cachedQuoteAuthor","cachedQuoteDate","todayDate","displayQuote","quoteData","quoteTextElement","quoteAuthorElement","subscribeToNewsletter","btn","subscribeForm","subscribeEmailInput","subscribeEmailError","result"],"mappings":"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"}